-- Generated by Oracle SQL Developer Data Modeler 17.3.0.261.1529
--   at:        2017-12-11 19:04:08 CET
--   site:      SQL Server 2008
--   type:      SQL Server 2008



CREATE TABLE Coupon 
    (
     ID INTEGER NOT NULL IDENTITY NOT FOR REPLICATION , 
     startvalidity DATETIME NOT NULL , 
     endvalidity DATETIME NOT NULL , 
     Customer_ID INTEGER NOT NULL , 
     Payment_ID INTEGER 
    )
    ON "default"
GO 



ALTER TABLE Coupon ADD CONSTRAINT Coupon_PK PRIMARY KEY CLUSTERED (ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE Customer 
    (
     ID INTEGER NOT NULL IDENTITY NOT FOR REPLICATION , 
     login VARCHAR (30) NOT NULL , 
     password VARCHAR (100) NOT NULL , 
     firstname VARCHAR (30) NOT NULL , 
     lastname VARCHAR (30) NOT NULL , 
     birthDate DATETIME NOT NULL , 
     city VARCHAR (50) NOT NULL , 
     adress VARCHAR (50) NOT NULL , 
     email VARCHAR (50) NOT NULL 
    )
    ON "default"
GO

ALTER TABLE Customer ADD CONSTRAINT Customer_PK PRIMARY KEY CLUSTERED (ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE CustomerJourney 
    (
     Customer_ID INTEGER NOT NULL , 
     Route_ID INTEGER NOT NULL , 
     exitDate DATETIME , 
     startDate DATETIME NOT NULL , 
     comment TEXT , 
     Station_IDstart INTEGER NOT NULL , 
     Station_IDend INTEGER , 
     Payment_ID INTEGER 
    )
    ON "default"
GO 

    

ALTER TABLE CustomerJourney ADD CONSTRAINT CustomerJourney_PK PRIMARY KEY CLUSTERED (Customer_ID, Route_ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE Employee 
    (
     ID INTEGER NOT NULL IDENTITY NOT FOR REPLICATION , 
     login VARCHAR (30) NOT NULL , 
     password VARCHAR (100) NOT NULL , 
     firstname VARCHAR (30) NOT NULL , 
     lastname VARCHAR (30) NOT NULL , 
     birthdate DATETIME NOT NULL , 
     city VARCHAR (50) NOT NULL , 
     adress VARCHAR (50) NOT NULL , 
     email VARCHAR (50) NOT NULL , 
     employment VARCHAR (50) NOT NULL 
    )
    ON "default"
GO

ALTER TABLE Employee ADD CONSTRAINT Employee_PK PRIMARY KEY CLUSTERED (ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE Payment 
    (
     ID INTEGER NOT NULL IDENTITY NOT FOR REPLICATION , 
     valuee MONEY , 
     paymentDate DATETIME , 
     Customer_ID INTEGER NOT NULL 
    )
    ON "default"
GO

ALTER TABLE Payment ADD CONSTRAINT Payment_PK PRIMARY KEY CLUSTERED (ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE Route 
    (
     ID INTEGER NOT NULL IDENTITY NOT FOR REPLICATION , 
     startRoute DATETIME NOT NULL , 
     endRoute DATETIME , 
     Employee_ID INTEGER NOT NULL , 
     Vehicle_ID INTEGER NOT NULL , 
     RouteNumber_ID INTEGER NOT NULL 
    )
    ON "default"
GO

ALTER TABLE Route ADD CONSTRAINT Route_PK PRIMARY KEY CLUSTERED (ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE RouteNumber 
    (
     ID INTEGER NOT NULL IDENTITY NOT FOR REPLICATION , 
     number INTEGER NOT NULL , 
     desciption TEXT 
    )
    ON "default"
GO

ALTER TABLE RouteNumber ADD CONSTRAINT RouteNumber_PK PRIMARY KEY CLUSTERED (ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE RouteNumberStation 
    (
     direction BIT NOT NULL , 
     RouteNumber_ID INTEGER NOT NULL , 
     Station_ID INTEGER NOT NULL , 
     orderr INTEGER NOT NULL , 
     describe TEXT , 
     kmToNextStation FLOAT (10) 
    )
    ON "default"
GO

ALTER TABLE RouteNumberStation ADD CONSTRAINT RouteNumberStation_PK PRIMARY KEY CLUSTERED (orderr, Station_ID, RouteNumber_ID, direction)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE Station 
    (
     ID INTEGER NOT NULL IDENTITY NOT FOR REPLICATION , 
     name VARCHAR (50) NOT NULL , 
     gpslat FLOAT (10) NOT NULL , 
     gpslng FLOAT (10) NOT NULL 
    )
    ON "default"
GO

ALTER TABLE Station ADD CONSTRAINT Station_PK PRIMARY KEY CLUSTERED (ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

CREATE TABLE Vehicle 
    (
     ID INTEGER NOT NULL IDENTITY NOT FOR REPLICATION , 
     name VARCHAR (50) NOT NULL , 
     brand VARCHAR (50) NOT NULL , 
     spz VARCHAR (9) NOT NULL , 
     year INTEGER NOT NULL , 
     capacity INTEGER NOT NULL 
    )
    ON "default"
GO

ALTER TABLE Vehicle ADD CONSTRAINT Vehicle_PK PRIMARY KEY CLUSTERED (ID)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
     ON "default" 
    GO

ALTER TABLE Coupon 
    ADD CONSTRAINT Coupon_Customer_FK FOREIGN KEY 
    ( 
     Customer_ID
    ) 
    REFERENCES Customer 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Coupon 
    ADD CONSTRAINT Coupon_Payment_FK FOREIGN KEY 
    ( 
     Payment_ID
    ) 
    REFERENCES Payment 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE CustomerJourney 
    ADD CONSTRAINT CustomerJourney_Customer_FK FOREIGN KEY 
    ( 
     Customer_ID
    ) 
    REFERENCES Customer 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE CustomerJourney 
    ADD CONSTRAINT CustomerJourney_Payment_FK FOREIGN KEY 
    ( 
     Payment_ID
    ) 
    REFERENCES Payment 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE CustomerJourney 
    ADD CONSTRAINT CustomerJourney_Route_FK FOREIGN KEY 
    ( 
     Route_ID
    ) 
    REFERENCES Route 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE CustomerJourney 
    ADD CONSTRAINT CustomerJourney_Station_FK FOREIGN KEY 
    ( 
     Station_IDend
    ) 
    REFERENCES Station 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE CustomerJourney 
    ADD CONSTRAINT CustomerJourney_Station_FKv1 FOREIGN KEY 
    ( 
     Station_IDstart
    ) 
    REFERENCES Station 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Payment 
    ADD CONSTRAINT Payment_Customer_FK FOREIGN KEY 
    ( 
     Customer_ID
    ) 
    REFERENCES Customer 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Route 
    ADD CONSTRAINT Route_Employee_FK FOREIGN KEY 
    ( 
     Employee_ID
    ) 
    REFERENCES Employee 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Route 
    ADD CONSTRAINT Route_RouteNumber_FK FOREIGN KEY 
    ( 
     RouteNumber_ID
    ) 
    REFERENCES RouteNumber 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE Route 
    ADD CONSTRAINT Route_Vehicle_FK FOREIGN KEY 
    ( 
     Vehicle_ID
    ) 
    REFERENCES Vehicle 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE RouteNumberStation 
    ADD CONSTRAINT RouteNumberStation_RouteNumber_FK FOREIGN KEY 
    ( 
     RouteNumber_ID
    ) 
    REFERENCES RouteNumber 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE RouteNumberStation 
    ADD CONSTRAINT RouteNumberStation_Station_FK FOREIGN KEY 
    ( 
     Station_ID
    ) 
    REFERENCES Station 
    ( 
     ID 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            10
-- CREATE INDEX                             2
-- ALTER TABLE                             23
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE DATABASE                          0
-- CREATE DEFAULT                           0
-- CREATE INDEX ON VIEW                     0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE ROLE                              0
-- CREATE RULE                              0
-- CREATE SCHEMA                            0
-- CREATE PARTITION FUNCTION                0
-- CREATE PARTITION SCHEME                  0
-- 
-- DROP DATABASE                            0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
